"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/documents/route";
exports.ids = ["app/api/documents/route"];
exports.modules = {

/***/ "bcrypt":
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("bcrypt");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ }),

/***/ "fs/promises":
/*!******************************!*\
  !*** external "fs/promises" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("fs/promises");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "node:buffer":
/*!******************************!*\
  !*** external "node:buffer" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:buffer");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("node:util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdocuments%2Froute&page=%2Fapi%2Fdocuments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocuments%2Froute.ts&appDir=C%3A%5CEnd%20of%20Life%20Planning%5Cend-of-life-planning%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CEnd%20of%20Life%20Planning%5Cend-of-life-planning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdocuments%2Froute&page=%2Fapi%2Fdocuments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocuments%2Froute.ts&appDir=C%3A%5CEnd%20of%20Life%20Planning%5Cend-of-life-planning%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CEnd%20of%20Life%20Planning%5Cend-of-life-planning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_End_of_Life_Planning_end_of_life_planning_app_api_documents_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/documents/route.ts */ \"(rsc)/./app/api/documents/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/documents/route\",\n        pathname: \"/api/documents\",\n        filename: \"route\",\n        bundlePath: \"app/api/documents/route\"\n    },\n    resolvedPagePath: \"C:\\\\End of Life Planning\\\\end-of-life-planning\\\\app\\\\api\\\\documents\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_End_of_Life_Planning_end_of_life_planning_app_api_documents_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/documents/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZkb2N1bWVudHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmRvY3VtZW50cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmRvY3VtZW50cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDRW5kJTIwb2YlMjBMaWZlJTIwUGxhbm5pbmclNUNlbmQtb2YtbGlmZS1wbGFubmluZyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q0VuZCUyMG9mJTIwTGlmZSUyMFBsYW5uaW5nJTVDZW5kLW9mLWxpZmUtcGxhbm5pbmcmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzZCO0FBQzFHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8/ZDBkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxFbmQgb2YgTGlmZSBQbGFubmluZ1xcXFxlbmQtb2YtbGlmZS1wbGFubmluZ1xcXFxhcHBcXFxcYXBpXFxcXGRvY3VtZW50c1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZG9jdW1lbnRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZG9jdW1lbnRzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9kb2N1bWVudHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxFbmQgb2YgTGlmZSBQbGFubmluZ1xcXFxlbmQtb2YtbGlmZS1wbGFubmluZ1xcXFxhcHBcXFxcYXBpXFxcXGRvY3VtZW50c1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvZG9jdW1lbnRzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdocuments%2Froute&page=%2Fapi%2Fdocuments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocuments%2Froute.ts&appDir=C%3A%5CEnd%20of%20Life%20Planning%5Cend-of-life-planning%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CEnd%20of%20Life%20Planning%5Cend-of-life-planning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/documents/route.ts":
/*!************************************!*\
  !*** ./app/api/documents/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! fs/promises */ \"fs/promises\");\n/* harmony import */ var fs_promises__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(fs_promises__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nasync function POST(req) {\n    try {\n        const token = req.cookies.get(\"token\")?.value;\n        if (!token) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const payload = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verify)(token);\n        const formData = await req.formData();\n        const name = formData.get(\"name\");\n        const type = formData.get(\"type\");\n        const tags = JSON.parse(formData.get(\"tags\"));\n        const file = formData.get(\"file\");\n        if (!name || !type || !file) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing required fields\"\n            }, {\n                status: 400\n            });\n        }\n        // Create uploads directory if it doesn't exist\n        const uploadsDir = path__WEBPACK_IMPORTED_MODULE_4___default().join(process.cwd(), \"public\", \"uploads\");\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_3__.mkdir)(uploadsDir, {\n            recursive: true\n        });\n        const filePath = path__WEBPACK_IMPORTED_MODULE_4___default().join(uploadsDir, file.name);\n        await (0,fs_promises__WEBPACK_IMPORTED_MODULE_3__.writeFile)(filePath, Buffer.from(await file.arrayBuffer()));\n        const file_path = `/uploads/${file.name}`;\n        const documentId = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.createDocument)(payload.userId, name, type, tags, file_path);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            id: documentId,\n            message: \"Document created successfully\"\n        });\n    } catch (error) {\n        console.error(\"Error creating document:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create document\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(req) {\n    try {\n        const token = req.cookies.get(\"token\")?.value;\n        if (!token) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        const payload = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verify)(token);\n        const url = new URL(req.url);\n        const documentId = url.searchParams.get(\"id\");\n        if (documentId) {\n            // Fetch the specific document\n            const documents = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.getDocumentsByUserId)(payload.userId);\n            const document = documents.find((doc)=>doc.id === parseInt(documentId));\n            if (!document) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Document not found\"\n                }, {\n                    status: 404\n                });\n            }\n            const filePath = path__WEBPACK_IMPORTED_MODULE_4___default().join(process.cwd(), \"public\", document.file_path);\n            const fileBuffer = await (0,fs_promises__WEBPACK_IMPORTED_MODULE_3__.readFile)(filePath);\n            const fileName = path__WEBPACK_IMPORTED_MODULE_4___default().basename(document.file_path);\n            // Determine the MIME type based on the file extension\n            const ext = path__WEBPACK_IMPORTED_MODULE_4___default().extname(fileName).toLowerCase();\n            let contentType = \"application/octet-stream\"; // Default content type\n            if (ext === \".pdf\") contentType = \"application/pdf\";\n            else if (ext === \".jpg\" || ext === \".jpeg\") contentType = \"image/jpeg\";\n            else if (ext === \".png\") contentType = \"image/png\";\n            // Add more content types as needed\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(fileBuffer, {\n                headers: {\n                    \"Content-Disposition\": `inline; filename=\"${fileName}\"`,\n                    \"Content-Type\": contentType\n                }\n            });\n        } else {\n            // Fetch all documents for the user\n            const documents = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.getDocumentsByUserId)(payload.userId);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(documents);\n        }\n    } catch (error) {\n        console.error(\"Error fetching documents:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch documents\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function PUT(req) {\n    try {\n        const token = req.cookies.get(\"token\")?.value;\n        if (!token) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verify)(token);\n        const { id, name, type, tags } = await req.json();\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.updateDocument)(id, name, type, tags);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Document updated successfully\"\n        });\n    } catch (error) {\n        console.error(\"Error updating document:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to update document\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function DELETE(req) {\n    try {\n        const token = req.cookies.get(\"token\")?.value;\n        if (!token) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verify)(token);\n        const { id } = await req.json();\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.deleteDocument)(id);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Document deleted successfully\"\n        });\n    } catch (error) {\n        console.error(\"Error deleting document:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to delete document\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Oi8vbXktdjAtcHJvamVjdC8uL2FwcC9hcGkvZG9jdW1lbnRzL3JvdXRlLnRzPzcxN2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgY3JlYXRlRG9jdW1lbnQsIGdldERvY3VtZW50c0J5VXNlcklkLCB1cGRhdGVEb2N1bWVudCwgZGVsZXRlRG9jdW1lbnQgfSBmcm9tICdAL2xpYi9kYic7XHJcbmltcG9ydCB7IHZlcmlmeSB9IGZyb20gJ0AvbGliL2F1dGgnO1xyXG5pbXBvcnQgeyB3cml0ZUZpbGUsIG1rZGlyLCByZWFkRmlsZSB9IGZyb20gJ2ZzL3Byb21pc2VzJztcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuZ2V0KCd0b2tlbicpPy52YWx1ZTtcclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHZlcmlmeSh0b2tlbik7XHJcbiAgICBcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxLmZvcm1EYXRhKCk7XHJcbiAgICBjb25zdCBuYW1lID0gZm9ybURhdGEuZ2V0KCduYW1lJykgYXMgc3RyaW5nO1xyXG4gICAgY29uc3QgdHlwZSA9IGZvcm1EYXRhLmdldCgndHlwZScpIGFzIHN0cmluZztcclxuICAgIGNvbnN0IHRhZ3MgPSBKU09OLnBhcnNlKGZvcm1EYXRhLmdldCgndGFncycpIGFzIHN0cmluZyk7XHJcbiAgICBjb25zdCBmaWxlID0gZm9ybURhdGEuZ2V0KCdmaWxlJykgYXMgRmlsZTtcclxuXHJcbiAgICBpZiAoIW5hbWUgfHwgIXR5cGUgfHwgIWZpbGUpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhdGUgdXBsb2FkcyBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxyXG4gICAgY29uc3QgdXBsb2Fkc0RpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ3VwbG9hZHMnKTtcclxuICAgIGF3YWl0IG1rZGlyKHVwbG9hZHNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xyXG5cclxuICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKHVwbG9hZHNEaXIsIGZpbGUubmFtZSk7XHJcbiAgICBhd2FpdCB3cml0ZUZpbGUoZmlsZVBhdGgsIEJ1ZmZlci5mcm9tKGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKSkpO1xyXG5cclxuICAgIGNvbnN0IGZpbGVfcGF0aCA9IGAvdXBsb2Fkcy8ke2ZpbGUubmFtZX1gO1xyXG5cclxuICAgIGNvbnN0IGRvY3VtZW50SWQgPSBhd2FpdCBjcmVhdGVEb2N1bWVudChwYXlsb2FkLnVzZXJJZCwgbmFtZSwgdHlwZSwgdGFncywgZmlsZV9wYXRoKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGlkOiBkb2N1bWVudElkLCBtZXNzYWdlOiAnRG9jdW1lbnQgY3JlYXRlZCBzdWNjZXNzZnVsbHknIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBkb2N1bWVudDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcclxuICAgICAgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIGRvY3VtZW50JywgXHJcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuZ2V0KCd0b2tlbicpPy52YWx1ZTtcclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHZlcmlmeSh0b2tlbik7XHJcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcS51cmwpO1xyXG4gICAgY29uc3QgZG9jdW1lbnRJZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdpZCcpO1xyXG5cclxuICAgIGlmIChkb2N1bWVudElkKSB7XHJcbiAgICAgIC8vIEZldGNoIHRoZSBzcGVjaWZpYyBkb2N1bWVudFxyXG4gICAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBnZXREb2N1bWVudHNCeVVzZXJJZChwYXlsb2FkLnVzZXJJZCk7XHJcbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gZG9jdW1lbnRzLmZpbmQoZG9jID0+IGRvYy5pZCA9PT0gcGFyc2VJbnQoZG9jdW1lbnRJZCkpO1xyXG5cclxuICAgICAgaWYgKCFkb2N1bWVudCkge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRG9jdW1lbnQgbm90IGZvdW5kJyB9LCB7IHN0YXR1czogNDA0IH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgZG9jdW1lbnQuZmlsZV9wYXRoKTtcclxuICAgICAgY29uc3QgZmlsZUJ1ZmZlciA9IGF3YWl0IHJlYWRGaWxlKGZpbGVQYXRoKTtcclxuICAgICAgY29uc3QgZmlsZU5hbWUgPSBwYXRoLmJhc2VuYW1lKGRvY3VtZW50LmZpbGVfcGF0aCk7XHJcblxyXG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIE1JTUUgdHlwZSBiYXNlZCBvbiB0aGUgZmlsZSBleHRlbnNpb25cclxuICAgICAgY29uc3QgZXh0ID0gcGF0aC5leHRuYW1lKGZpbGVOYW1lKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICBsZXQgY29udGVudFR5cGUgPSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJzsgLy8gRGVmYXVsdCBjb250ZW50IHR5cGVcclxuICAgICAgaWYgKGV4dCA9PT0gJy5wZGYnKSBjb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi9wZGYnO1xyXG4gICAgICBlbHNlIGlmIChleHQgPT09ICcuanBnJyB8fCBleHQgPT09ICcuanBlZycpIGNvbnRlbnRUeXBlID0gJ2ltYWdlL2pwZWcnO1xyXG4gICAgICBlbHNlIGlmIChleHQgPT09ICcucG5nJykgY29udGVudFR5cGUgPSAnaW1hZ2UvcG5nJztcclxuICAgICAgLy8gQWRkIG1vcmUgY29udGVudCB0eXBlcyBhcyBuZWVkZWRcclxuXHJcbiAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKGZpbGVCdWZmZXIsIHtcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQ29udGVudC1EaXNwb3NpdGlvbic6IGBpbmxpbmU7IGZpbGVuYW1lPVwiJHtmaWxlTmFtZX1cImAsXHJcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogY29udGVudFR5cGUsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBGZXRjaCBhbGwgZG9jdW1lbnRzIGZvciB0aGUgdXNlclxyXG4gICAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBnZXREb2N1bWVudHNCeVVzZXJJZChwYXlsb2FkLnVzZXJJZCk7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihkb2N1bWVudHMpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBkb2N1bWVudHM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggZG9jdW1lbnRzJyB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHRva2VuID0gcmVxLmNvb2tpZXMuZ2V0KCd0b2tlbicpPy52YWx1ZTtcclxuICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0sIHsgc3RhdHVzOiA0MDEgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXdhaXQgdmVyaWZ5KHRva2VuKTtcclxuICAgIGNvbnN0IHsgaWQsIG5hbWUsIHR5cGUsIHRhZ3MgfSA9IGF3YWl0IHJlcS5qc29uKCk7XHJcbiAgICBhd2FpdCB1cGRhdGVEb2N1bWVudChpZCwgbmFtZSwgdHlwZSwgdGFncyk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiAnRG9jdW1lbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHknIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBkb2N1bWVudDonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgZG9jdW1lbnQnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcTogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgdG9rZW4gPSByZXEuY29va2llcy5nZXQoJ3Rva2VuJyk/LnZhbHVlO1xyXG4gICAgaWYgKCF0b2tlbikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhd2FpdCB2ZXJpZnkodG9rZW4pO1xyXG4gICAgY29uc3QgeyBpZCB9ID0gYXdhaXQgcmVxLmpzb24oKTtcclxuICAgIGF3YWl0IGRlbGV0ZURvY3VtZW50KGlkKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6ICdEb2N1bWVudCBkZWxldGVkIHN1Y2Nlc3NmdWxseScgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGRvY3VtZW50OicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGRlbGV0ZSBkb2N1bWVudCcgfSwgeyBzdGF0dXM6IDUwMCB9KTtcclxuICB9XHJcbn1cclxuXHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcmVhdGVEb2N1bWVudCIsImdldERvY3VtZW50c0J5VXNlcklkIiwidXBkYXRlRG9jdW1lbnQiLCJkZWxldGVEb2N1bWVudCIsInZlcmlmeSIsIndyaXRlRmlsZSIsIm1rZGlyIiwicmVhZEZpbGUiLCJwYXRoIiwiUE9TVCIsInJlcSIsInRva2VuIiwiY29va2llcyIsImdldCIsInZhbHVlIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwicGF5bG9hZCIsImZvcm1EYXRhIiwibmFtZSIsInR5cGUiLCJ0YWdzIiwiSlNPTiIsInBhcnNlIiwiZmlsZSIsInVwbG9hZHNEaXIiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsInJlY3Vyc2l2ZSIsImZpbGVQYXRoIiwiQnVmZmVyIiwiZnJvbSIsImFycmF5QnVmZmVyIiwiZmlsZV9wYXRoIiwiZG9jdW1lbnRJZCIsInVzZXJJZCIsImlkIiwibWVzc2FnZSIsImNvbnNvbGUiLCJkZXRhaWxzIiwiRXJyb3IiLCJHRVQiLCJ1cmwiLCJVUkwiLCJzZWFyY2hQYXJhbXMiLCJkb2N1bWVudHMiLCJkb2N1bWVudCIsImZpbmQiLCJkb2MiLCJwYXJzZUludCIsImZpbGVCdWZmZXIiLCJmaWxlTmFtZSIsImJhc2VuYW1lIiwiZXh0IiwiZXh0bmFtZSIsInRvTG93ZXJDYXNlIiwiY29udGVudFR5cGUiLCJoZWFkZXJzIiwiUFVUIiwiREVMRVRFIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/documents/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sign: () => (/* binding */ sign),\n/* harmony export */   verify: () => (/* binding */ verify)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/sign.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/verify.js\");\n\nconst secret = new TextEncoder().encode(process.env.JWT_SECRET || \"\");\nasync function sign(payload) {\n    const iat = Math.floor(Date.now() / 1000);\n    const exp = iat + 60 * 60; // 1 hour\n    return new jose__WEBPACK_IMPORTED_MODULE_0__.SignJWT({\n        ...payload\n    }).setProtectedHeader({\n        alg: \"HS256\",\n        typ: \"JWT\"\n    }).setExpirationTime(exp).setIssuedAt(iat).setNotBefore(iat).sign(secret);\n}\nasync function verify(token) {\n    const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_1__.jwtVerify)(token, secret, {\n        algorithms: [\n            \"HS256\"\n        ]\n    });\n    return payload;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTBDO0FBRTFDLE1BQU1FLFNBQVMsSUFBSUMsY0FBY0MsTUFBTSxDQUFDQyxRQUFRQyxHQUFHLENBQUNDLFVBQVUsSUFBSTtBQUUzRCxlQUFlQyxLQUFLQyxPQUFZO0lBQ3JDLE1BQU1DLE1BQU1DLEtBQUtDLEtBQUssQ0FBQ0MsS0FBS0MsR0FBRyxLQUFLO0lBQ3BDLE1BQU1DLE1BQU1MLE1BQU0sS0FBSyxJQUFJLFNBQVM7SUFFcEMsT0FBTyxJQUFJVCx5Q0FBT0EsQ0FBQztRQUFFLEdBQUdRLE9BQU87SUFBQyxHQUM3Qk8sa0JBQWtCLENBQUM7UUFBRUMsS0FBSztRQUFTQyxLQUFLO0lBQU0sR0FDOUNDLGlCQUFpQixDQUFDSixLQUNsQkssV0FBVyxDQUFDVixLQUNaVyxZQUFZLENBQUNYLEtBQ2JGLElBQUksQ0FBQ047QUFDVjtBQUVPLGVBQWVvQixPQUFPQyxLQUFhO0lBQ3hDLE1BQU0sRUFBRWQsT0FBTyxFQUFFLEdBQUcsTUFBTVQsK0NBQVNBLENBQUN1QixPQUFPckIsUUFBUTtRQUNqRHNCLFlBQVk7WUFBQztTQUFRO0lBQ3ZCO0lBQ0EsT0FBT2Y7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGp3dFZlcmlmeSwgU2lnbkpXVCB9IGZyb20gJ2pvc2UnO1xyXG5cclxuY29uc3Qgc2VjcmV0ID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgJycpO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNpZ24ocGF5bG9hZDogYW55KTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICBjb25zdCBpYXQgPSBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKTtcclxuICBjb25zdCBleHAgPSBpYXQgKyA2MCAqIDYwOyAvLyAxIGhvdXJcclxuXHJcbiAgcmV0dXJuIG5ldyBTaWduSldUKHsgLi4ucGF5bG9hZCB9KVxyXG4gICAgLnNldFByb3RlY3RlZEhlYWRlcih7IGFsZzogJ0hTMjU2JywgdHlwOiAnSldUJyB9KVxyXG4gICAgLnNldEV4cGlyYXRpb25UaW1lKGV4cClcclxuICAgIC5zZXRJc3N1ZWRBdChpYXQpXHJcbiAgICAuc2V0Tm90QmVmb3JlKGlhdClcclxuICAgIC5zaWduKHNlY3JldCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2ZXJpZnkodG9rZW46IHN0cmluZyk6IFByb21pc2U8YW55PiB7XHJcbiAgY29uc3QgeyBwYXlsb2FkIH0gPSBhd2FpdCBqd3RWZXJpZnkodG9rZW4sIHNlY3JldCwge1xyXG4gICAgYWxnb3JpdGhtczogWydIUzI1NiddLFxyXG4gIH0pO1xyXG4gIHJldHVybiBwYXlsb2FkO1xyXG59XHJcblxyXG4iXSwibmFtZXMiOlsiand0VmVyaWZ5IiwiU2lnbkpXVCIsInNlY3JldCIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJzaWduIiwicGF5bG9hZCIsImlhdCIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJleHAiLCJzZXRQcm90ZWN0ZWRIZWFkZXIiLCJhbGciLCJ0eXAiLCJzZXRFeHBpcmF0aW9uVGltZSIsInNldElzc3VlZEF0Iiwic2V0Tm90QmVmb3JlIiwidmVyaWZ5IiwidG9rZW4iLCJhbGdvcml0aG1zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDocument: () => (/* binding */ createDocument),\n/* harmony export */   createUser: () => (/* binding */ createUser),\n/* harmony export */   deleteDocument: () => (/* binding */ deleteDocument),\n/* harmony export */   getDocumentsByUserId: () => (/* binding */ getDocumentsByUserId),\n/* harmony export */   getPool: () => (/* binding */ getPool),\n/* harmony export */   getUserByEmail: () => (/* binding */ getUserByEmail),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   updateDocument: () => (/* binding */ updateDocument),\n/* harmony export */   validateUser: () => (/* binding */ validateUser)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pg__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcrypt */ \"bcrypt\");\n/* harmony import */ var bcrypt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcrypt__WEBPACK_IMPORTED_MODULE_1__);\n\n\nlet pool;\nfunction getPool() {\n    if (!pool) {\n        const connectionString = process.env.DATABASE_URL;\n        if (!connectionString) {\n            throw new Error(\"DATABASE_URL is not set in environment variables\");\n        }\n        pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n            connectionString,\n            ssl: {\n                rejectUnauthorized: false\n            }\n        });\n    }\n    return pool;\n}\nasync function ensureTablesExist() {\n    const client = await getPool().connect();\n    try {\n        // Check if auth_users table exists\n        const authUsersExists = await client.query(`\n      SELECT EXISTS (\n        SELECT FROM information_schema.tables \n        WHERE table_name = 'auth_users'\n      );\n    `);\n        if (!authUsersExists.rows[0].exists) {\n            await client.query(`\n        CREATE TABLE auth_users (\n          id SERIAL PRIMARY KEY,\n          email VARCHAR(255) UNIQUE NOT NULL,\n          password VARCHAR(255) NOT NULL\n        );\n      `);\n        }\n        // Check if users table exists\n        const usersExists = await client.query(`\n      SELECT EXISTS (\n        SELECT FROM information_schema.tables \n        WHERE table_name = 'users'\n      );\n    `);\n        if (!usersExists.rows[0].exists) {\n            await client.query(`\n        CREATE TABLE users (\n          id SERIAL PRIMARY KEY,\n          name VARCHAR(255) NOT NULL,\n          email VARCHAR(255) UNIQUE NOT NULL\n        );\n      `);\n        }\n        // Check if auth_user_id column exists in users table\n        const authUserIdExists = await client.query(`\n      SELECT EXISTS (\n        SELECT FROM information_schema.columns\n        WHERE table_name = 'users' AND column_name = 'auth_user_id'\n      );\n    `);\n        if (!authUserIdExists.rows[0].exists) {\n            await client.query(`\n        ALTER TABLE users\n        ADD COLUMN auth_user_id INTEGER REFERENCES auth_users(id);\n      `);\n        }\n        // Check if documents table exists\n        const documentsExists = await client.query(`\n      SELECT EXISTS (\n        SELECT FROM information_schema.tables \n        WHERE table_name = 'documents'\n      );\n    `);\n        if (!documentsExists.rows[0].exists) {\n            await client.query(`\n        CREATE TABLE documents (\n          id SERIAL PRIMARY KEY,\n          user_id INTEGER REFERENCES users(id),\n          name VARCHAR(255) NOT NULL,\n          type VARCHAR(255) NOT NULL,\n          tags TEXT[],\n          upload_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n          file_path VARCHAR(255) NOT NULL,\n          uploader_id INTEGER REFERENCES users(id)\n        );\n      `);\n        }\n    } finally{\n        client.release();\n    }\n}\nasync function createUser(name, email, password) {\n    await ensureTablesExist();\n    const client = await getPool().connect();\n    try {\n        await client.query(\"BEGIN\");\n        const hashedPassword = await (0,bcrypt__WEBPACK_IMPORTED_MODULE_1__.hash)(password, 10);\n        const authResult = await client.query(\"INSERT INTO auth_users (email, password) VALUES ($1, $2) RETURNING id\", [\n            email,\n            hashedPassword\n        ]);\n        const authUserId = authResult.rows[0].id;\n        const userResult = await client.query(\"INSERT INTO users (name, email, auth_user_id) VALUES ($1, $2, $3) RETURNING id, name, email\", [\n            name,\n            email,\n            authUserId\n        ]);\n        await client.query(\"COMMIT\");\n        return userResult.rows[0];\n    } catch (error) {\n        await client.query(\"ROLLBACK\");\n        console.error(\"Error in createUser:\", error);\n        throw error;\n    } finally{\n        client.release();\n    }\n}\nasync function getUserByEmail(email) {\n    await ensureTablesExist();\n    const client = await getPool().connect();\n    try {\n        const result = await client.query(`\n      SELECT u.*, au.password \n      FROM users u \n      JOIN auth_users au ON u.auth_user_id = au.id \n      WHERE u.email = $1\n    `, [\n            email\n        ]);\n        return result.rows[0];\n    } catch (error) {\n        console.error(\"Error in getUserByEmail:\", error);\n        throw error;\n    } finally{\n        client.release();\n    }\n}\nasync function validateUser(email, password) {\n    await ensureTablesExist();\n    const client = await getPool().connect();\n    try {\n        console.log(\"Validating user:\", email);\n        const result = await client.query(\"SELECT * FROM auth_users WHERE email = $1\", [\n            email\n        ]);\n        console.log(\"Query result:\", result.rows.length > 0 ? \"User found\" : \"User not found\");\n        if (result.rows.length === 0) {\n            return null;\n        }\n        const user = result.rows[0];\n        const isValid = await (0,bcrypt__WEBPACK_IMPORTED_MODULE_1__.compare)(password, user.password);\n        console.log(\"Password validation:\", isValid ? \"Valid\" : \"Invalid\");\n        return isValid ? user : null;\n    } catch (error) {\n        console.error(\"Error validating user:\", error);\n        throw error;\n    } finally{\n        client.release();\n    }\n}\nasync function getUserById(id) {\n    const client = await getPool().connect();\n    try {\n        const result = await client.query(\"SELECT id, name, email FROM users WHERE id = $1\", [\n            id\n        ]);\n        return result.rows[0] || null;\n    } finally{\n        client.release();\n    }\n}\nasync function createDocument(userId, name, type, tags, filePath) {\n    await ensureTablesExist();\n    const client = await getPool().connect();\n    try {\n        const result = await client.query(\"INSERT INTO documents (user_id, name, type, tags, file_path, uploader_id, upload_date) VALUES ($1, $2, $3, $4, $5, $1, CURRENT_TIMESTAMP) RETURNING id\", [\n            userId,\n            name,\n            type,\n            tags,\n            filePath\n        ]);\n        return result.rows[0].id;\n    } catch (error) {\n        console.error(\"Error in createDocument:\", error);\n        throw error;\n    } finally{\n        client.release();\n    }\n}\nasync function getDocumentsByUserId(userId) {\n    await ensureTablesExist();\n    const client = await getPool().connect();\n    try {\n        const result = await client.query(`\n      SELECT d.*, u.name as uploader_name \n      FROM documents d \n      LEFT JOIN users u ON d.uploader_id = u.id \n      WHERE d.user_id = $1\n    `, [\n            userId\n        ]);\n        return result.rows;\n    } finally{\n        client.release();\n    }\n}\nasync function updateDocument(id, name, type, tags) {\n    await ensureTablesExist();\n    const client = await getPool().connect();\n    try {\n        await client.query(\"UPDATE documents SET name = $1, type = $2, tags = $3 WHERE id = $4\", [\n            name,\n            type,\n            tags,\n            id\n        ]);\n    } finally{\n        client.release();\n    }\n}\nasync function deleteDocument(id) {\n    await ensureTablesExist();\n    const client = await getPool().connect();\n    try {\n        await client.query(\"DELETE FROM documents WHERE id = $1\", [\n            id\n        ]);\n    } finally{\n        client.release();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNVCxVQUFVVSxPQUFPO0lBQ3RDLElBQUk7UUFDRixNQUFNRCxPQUFPRyxLQUFLLENBQUMsdUNBQXVDO1lBQUNjO1NBQUc7SUFDaEUsU0FBVTtRQUNSakIsT0FBT1MsT0FBTztJQUNoQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBvb2wgfSBmcm9tICdwZyc7XG5pbXBvcnQgeyBoYXNoLCBjb21wYXJlIH0gZnJvbSAnYmNyeXB0JztcblxubGV0IHBvb2w6IFBvb2w7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb29sKCkge1xuICBpZiAoIXBvb2wpIHtcbiAgICBjb25zdCBjb25uZWN0aW9uU3RyaW5nID0gcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMO1xuICAgIGlmICghY29ubmVjdGlvblN0cmluZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdEQVRBQkFTRV9VUkwgaXMgbm90IHNldCBpbiBlbnZpcm9ubWVudCB2YXJpYWJsZXMnKTtcbiAgICB9XG4gICAgcG9vbCA9IG5ldyBQb29sKHtcbiAgICAgIGNvbm5lY3Rpb25TdHJpbmcsXG4gICAgICBzc2w6IHtcbiAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBwb29sO1xufVxuXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVUYWJsZXNFeGlzdCgpIHtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0UG9vbCgpLmNvbm5lY3QoKTtcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBpZiBhdXRoX3VzZXJzIHRhYmxlIGV4aXN0c1xuICAgIGNvbnN0IGF1dGhVc2Vyc0V4aXN0cyA9IGF3YWl0IGNsaWVudC5xdWVyeShgXG4gICAgICBTRUxFQ1QgRVhJU1RTIChcbiAgICAgICAgU0VMRUNUIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLnRhYmxlcyBcbiAgICAgICAgV0hFUkUgdGFibGVfbmFtZSA9ICdhdXRoX3VzZXJzJ1xuICAgICAgKTtcbiAgICBgKTtcblxuICAgIGlmICghYXV0aFVzZXJzRXhpc3RzLnJvd3NbMF0uZXhpc3RzKSB7XG4gICAgICBhd2FpdCBjbGllbnQucXVlcnkoYFxuICAgICAgICBDUkVBVEUgVEFCTEUgYXV0aF91c2VycyAoXG4gICAgICAgICAgaWQgU0VSSUFMIFBSSU1BUlkgS0VZLFxuICAgICAgICAgIGVtYWlsIFZBUkNIQVIoMjU1KSBVTklRVUUgTk9UIE5VTEwsXG4gICAgICAgICAgcGFzc3dvcmQgVkFSQ0hBUigyNTUpIE5PVCBOVUxMXG4gICAgICAgICk7XG4gICAgICBgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB1c2VycyB0YWJsZSBleGlzdHNcbiAgICBjb25zdCB1c2Vyc0V4aXN0cyA9IGF3YWl0IGNsaWVudC5xdWVyeShgXG4gICAgICBTRUxFQ1QgRVhJU1RTIChcbiAgICAgICAgU0VMRUNUIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLnRhYmxlcyBcbiAgICAgICAgV0hFUkUgdGFibGVfbmFtZSA9ICd1c2VycydcbiAgICAgICk7XG4gICAgYCk7XG5cbiAgICBpZiAoIXVzZXJzRXhpc3RzLnJvd3NbMF0uZXhpc3RzKSB7XG4gICAgICBhd2FpdCBjbGllbnQucXVlcnkoYFxuICAgICAgICBDUkVBVEUgVEFCTEUgdXNlcnMgKFxuICAgICAgICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSxcbiAgICAgICAgICBuYW1lIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgICBlbWFpbCBWQVJDSEFSKDI1NSkgVU5JUVVFIE5PVCBOVUxMXG4gICAgICAgICk7XG4gICAgICBgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBhdXRoX3VzZXJfaWQgY29sdW1uIGV4aXN0cyBpbiB1c2VycyB0YWJsZVxuICAgIGNvbnN0IGF1dGhVc2VySWRFeGlzdHMgPSBhd2FpdCBjbGllbnQucXVlcnkoYFxuICAgICAgU0VMRUNUIEVYSVNUUyAoXG4gICAgICAgIFNFTEVDVCBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5jb2x1bW5zXG4gICAgICAgIFdIRVJFIHRhYmxlX25hbWUgPSAndXNlcnMnIEFORCBjb2x1bW5fbmFtZSA9ICdhdXRoX3VzZXJfaWQnXG4gICAgICApO1xuICAgIGApO1xuXG4gICAgaWYgKCFhdXRoVXNlcklkRXhpc3RzLnJvd3NbMF0uZXhpc3RzKSB7XG4gICAgICBhd2FpdCBjbGllbnQucXVlcnkoYFxuICAgICAgICBBTFRFUiBUQUJMRSB1c2Vyc1xuICAgICAgICBBREQgQ09MVU1OIGF1dGhfdXNlcl9pZCBJTlRFR0VSIFJFRkVSRU5DRVMgYXV0aF91c2VycyhpZCk7XG4gICAgICBgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBkb2N1bWVudHMgdGFibGUgZXhpc3RzXG4gICAgY29uc3QgZG9jdW1lbnRzRXhpc3RzID0gYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICAgIFNFTEVDVCBFWElTVFMgKFxuICAgICAgICBTRUxFQ1QgRlJPTSBpbmZvcm1hdGlvbl9zY2hlbWEudGFibGVzIFxuICAgICAgICBXSEVSRSB0YWJsZV9uYW1lID0gJ2RvY3VtZW50cydcbiAgICAgICk7XG4gICAgYCk7XG5cbiAgICBpZiAoIWRvY3VtZW50c0V4aXN0cy5yb3dzWzBdLmV4aXN0cykge1xuICAgICAgYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICAgICAgQ1JFQVRFIFRBQkxFIGRvY3VtZW50cyAoXG4gICAgICAgICAgaWQgU0VSSUFMIFBSSU1BUlkgS0VZLFxuICAgICAgICAgIHVzZXJfaWQgSU5URUdFUiBSRUZFUkVOQ0VTIHVzZXJzKGlkKSxcbiAgICAgICAgICBuYW1lIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgICB0eXBlIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiAgICAgICAgICB0YWdzIFRFWFRbXSxcbiAgICAgICAgICB1cGxvYWRfZGF0ZSBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgICBmaWxlX3BhdGggVkFSQ0hBUigyNTUpIE5PVCBOVUxMLFxuICAgICAgICAgIHVwbG9hZGVyX2lkIElOVEVHRVIgUkVGRVJFTkNFUyB1c2VycyhpZClcbiAgICAgICAgKTtcbiAgICAgIGApO1xuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICBjbGllbnQucmVsZWFzZSgpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVVc2VyKG5hbWU6IHN0cmluZywgZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xuICBhd2FpdCBlbnN1cmVUYWJsZXNFeGlzdCgpO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRQb29sKCkuY29ubmVjdCgpO1xuICB0cnkge1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeSgnQkVHSU4nKTtcbiAgICBcbiAgICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGhhc2gocGFzc3dvcmQsIDEwKTtcbiAgICBjb25zdCBhdXRoUmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KFxuICAgICAgJ0lOU0VSVCBJTlRPIGF1dGhfdXNlcnMgKGVtYWlsLCBwYXNzd29yZCkgVkFMVUVTICgkMSwgJDIpIFJFVFVSTklORyBpZCcsXG4gICAgICBbZW1haWwsIGhhc2hlZFBhc3N3b3JkXVxuICAgICk7XG4gICAgY29uc3QgYXV0aFVzZXJJZCA9IGF1dGhSZXN1bHQucm93c1swXS5pZDtcblxuICAgIGNvbnN0IHVzZXJSZXN1bHQgPSBhd2FpdCBjbGllbnQucXVlcnkoXG4gICAgICAnSU5TRVJUIElOVE8gdXNlcnMgKG5hbWUsIGVtYWlsLCBhdXRoX3VzZXJfaWQpIFZBTFVFUyAoJDEsICQyLCAkMykgUkVUVVJOSU5HIGlkLCBuYW1lLCBlbWFpbCcsXG4gICAgICBbbmFtZSwgZW1haWwsIGF1dGhVc2VySWRdXG4gICAgKTtcblxuICAgIGF3YWl0IGNsaWVudC5xdWVyeSgnQ09NTUlUJyk7XG4gICAgcmV0dXJuIHVzZXJSZXN1bHQucm93c1swXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBhd2FpdCBjbGllbnQucXVlcnkoJ1JPTExCQUNLJyk7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gY3JlYXRlVXNlcjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5RW1haWwoZW1haWw6IHN0cmluZykge1xuICBhd2FpdCBlbnN1cmVUYWJsZXNFeGlzdCgpO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRQb29sKCkuY29ubmVjdCgpO1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC5xdWVyeShgXG4gICAgICBTRUxFQ1QgdS4qLCBhdS5wYXNzd29yZCBcbiAgICAgIEZST00gdXNlcnMgdSBcbiAgICAgIEpPSU4gYXV0aF91c2VycyBhdSBPTiB1LmF1dGhfdXNlcl9pZCA9IGF1LmlkIFxuICAgICAgV0hFUkUgdS5lbWFpbCA9ICQxXG4gICAgYCwgW2VtYWlsXSk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzWzBdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGdldFVzZXJCeUVtYWlsOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGllbnQucmVsZWFzZSgpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVVzZXIoZW1haWw6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xuICBhd2FpdCBlbnN1cmVUYWJsZXNFeGlzdCgpO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRQb29sKCkuY29ubmVjdCgpO1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdWYWxpZGF0aW5nIHVzZXI6JywgZW1haWwpO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC5xdWVyeSgnU0VMRUNUICogRlJPTSBhdXRoX3VzZXJzIFdIRVJFIGVtYWlsID0gJDEnLCBbZW1haWxdKTtcbiAgICBjb25zb2xlLmxvZygnUXVlcnkgcmVzdWx0OicsIHJlc3VsdC5yb3dzLmxlbmd0aCA+IDAgPyAnVXNlciBmb3VuZCcgOiAnVXNlciBub3QgZm91bmQnKTtcbiAgICBpZiAocmVzdWx0LnJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgdXNlciA9IHJlc3VsdC5yb3dzWzBdO1xuICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCBjb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKTtcbiAgICBjb25zb2xlLmxvZygnUGFzc3dvcmQgdmFsaWRhdGlvbjonLCBpc1ZhbGlkID8gJ1ZhbGlkJyA6ICdJbnZhbGlkJyk7XG4gICAgcmV0dXJuIGlzVmFsaWQgPyB1c2VyIDogbnVsbDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB2YWxpZGF0aW5nIHVzZXI6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9IGZpbmFsbHkge1xuICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeUlkKGlkOiBzdHJpbmcpIHtcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0UG9vbCgpLmNvbm5lY3QoKTtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbGllbnQucXVlcnkoJ1NFTEVDVCBpZCwgbmFtZSwgZW1haWwgRlJPTSB1c2VycyBXSEVSRSBpZCA9ICQxJywgW2lkXSk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzWzBdIHx8IG51bGw7XG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRG9jdW1lbnQodXNlcklkOiBudW1iZXIsIG5hbWU6IHN0cmluZywgdHlwZTogc3RyaW5nLCB0YWdzOiBzdHJpbmdbXSwgZmlsZVBhdGg6IHN0cmluZykge1xuICBhd2FpdCBlbnN1cmVUYWJsZXNFeGlzdCgpO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRQb29sKCkuY29ubmVjdCgpO1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsaWVudC5xdWVyeShcbiAgICAgICdJTlNFUlQgSU5UTyBkb2N1bWVudHMgKHVzZXJfaWQsIG5hbWUsIHR5cGUsIHRhZ3MsIGZpbGVfcGF0aCwgdXBsb2FkZXJfaWQsIHVwbG9hZF9kYXRlKSBWQUxVRVMgKCQxLCAkMiwgJDMsICQ0LCAkNSwgJDEsIENVUlJFTlRfVElNRVNUQU1QKSBSRVRVUk5JTkcgaWQnLFxuICAgICAgW3VzZXJJZCwgbmFtZSwgdHlwZSwgdGFncywgZmlsZVBhdGhdXG4gICAgKTtcbiAgICByZXR1cm4gcmVzdWx0LnJvd3NbMF0uaWQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gY3JlYXRlRG9jdW1lbnQ6JywgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9IGZpbmFsbHkge1xuICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3VtZW50c0J5VXNlcklkKHVzZXJJZDogbnVtYmVyKSB7XG4gIGF3YWl0IGVuc3VyZVRhYmxlc0V4aXN0KCk7XG4gIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldFBvb2woKS5jb25uZWN0KCk7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KGBcbiAgICAgIFNFTEVDVCBkLiosIHUubmFtZSBhcyB1cGxvYWRlcl9uYW1lIFxuICAgICAgRlJPTSBkb2N1bWVudHMgZCBcbiAgICAgIExFRlQgSk9JTiB1c2VycyB1IE9OIGQudXBsb2FkZXJfaWQgPSB1LmlkIFxuICAgICAgV0hFUkUgZC51c2VyX2lkID0gJDFcbiAgICBgLCBbdXNlcklkXSk7XG4gICAgcmV0dXJuIHJlc3VsdC5yb3dzO1xuICB9IGZpbmFsbHkge1xuICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZURvY3VtZW50KGlkOiBudW1iZXIsIG5hbWU6IHN0cmluZywgdHlwZTogc3RyaW5nLCB0YWdzOiBzdHJpbmdbXSkge1xuICBhd2FpdCBlbnN1cmVUYWJsZXNFeGlzdCgpO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRQb29sKCkuY29ubmVjdCgpO1xuICB0cnkge1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeShcbiAgICAgICdVUERBVEUgZG9jdW1lbnRzIFNFVCBuYW1lID0gJDEsIHR5cGUgPSAkMiwgdGFncyA9ICQzIFdIRVJFIGlkID0gJDQnLFxuICAgICAgW25hbWUsIHR5cGUsIHRhZ3MsIGlkXVxuICAgICk7XG4gIH0gZmluYWxseSB7XG4gICAgY2xpZW50LnJlbGVhc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlRG9jdW1lbnQoaWQ6IG51bWJlcikge1xuICBhd2FpdCBlbnN1cmVUYWJsZXNFeGlzdCgpO1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRQb29sKCkuY29ubmVjdCgpO1xuICB0cnkge1xuICAgIGF3YWl0IGNsaWVudC5xdWVyeSgnREVMRVRFIEZST00gZG9jdW1lbnRzIFdIRVJFIGlkID0gJDEnLCBbaWRdKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBjbGllbnQucmVsZWFzZSgpO1xuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJQb29sIiwiaGFzaCIsImNvbXBhcmUiLCJwb29sIiwiZ2V0UG9vbCIsImNvbm5lY3Rpb25TdHJpbmciLCJwcm9jZXNzIiwiZW52IiwiREFUQUJBU0VfVVJMIiwiRXJyb3IiLCJzc2wiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJlbnN1cmVUYWJsZXNFeGlzdCIsImNsaWVudCIsImNvbm5lY3QiLCJhdXRoVXNlcnNFeGlzdHMiLCJxdWVyeSIsInJvd3MiLCJleGlzdHMiLCJ1c2Vyc0V4aXN0cyIsImF1dGhVc2VySWRFeGlzdHMiLCJkb2N1bWVudHNFeGlzdHMiLCJyZWxlYXNlIiwiY3JlYXRlVXNlciIsIm5hbWUiLCJlbWFpbCIsInBhc3N3b3JkIiwiaGFzaGVkUGFzc3dvcmQiLCJhdXRoUmVzdWx0IiwiYXV0aFVzZXJJZCIsImlkIiwidXNlclJlc3VsdCIsImVycm9yIiwiY29uc29sZSIsImdldFVzZXJCeUVtYWlsIiwicmVzdWx0IiwidmFsaWRhdGVVc2VyIiwibG9nIiwibGVuZ3RoIiwidXNlciIsImlzVmFsaWQiLCJnZXRVc2VyQnlJZCIsImNyZWF0ZURvY3VtZW50IiwidXNlcklkIiwidHlwZSIsInRhZ3MiLCJmaWxlUGF0aCIsImdldERvY3VtZW50c0J5VXNlcklkIiwidXBkYXRlRG9jdW1lbnQiLCJkZWxldGVEb2N1bWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jose"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fdocuments%2Froute&page=%2Fapi%2Fdocuments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdocuments%2Froute.ts&appDir=C%3A%5CEnd%20of%20Life%20Planning%5Cend-of-life-planning%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CEnd%20of%20Life%20Planning%5Cend-of-life-planning&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();